
<!DOCTYPE html>

<html>

<head>
    <title>IMAGES</title>
    <meta charset="utf-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js" charset="utf-8"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
</head>
<style>
    .results img {
        width: 33.3%;
        float: left;
        display: block;
    }
</style>

<body>
    <div class="results"></div>
    <script>
    var totalButton1 = 0;
    var but1=[];
    var totalButton2 = 0;
    var totalButton3 = 0;
    var totalButton4 = 0;
    var totalButton5 = 0;
          var w = 1200,
              h = 800,
              margin = 25;
                var svg = d3.select("body")
                    .append("svg")
                    .attr("width", w)
                    .attr("height", h);
var parseDate = d3.time.format('%B %d, %Y %I:%M%p').parse;


var mindate, maxdate;
        $(document).ready(function() {

            $.getJSON("https://spreadsheets.google.com/feeds/list/1iWrQh4Pc1G7DkyTCJGy2QLSI4sqnCRtjMbxOMh1b2tQ/od6/public/values?alt=json", function(data) {
                // var parseDate = d3.time.format('%B %d, %Y %I:%M%p').parse;

                for(i=0; i<data.feed.entry.length; i++){
                         if(data.feed.entry[i]['gsx$button']['$t']=="button1"){
                            totalButton1++;
                            but1.push({"total":totalButton1, "timeIs":data.feed.entry[i]['gsx$timestamp']['$t'].replace(" at",'')})

                        }
                    }
if(but1.length>1){
    mindate = parseDate(but1[0].timeIs);
    maxdate = parseDate(but1[totalButton1-1].timeIs);
var x = d3.time.scale()
    .domain([mindate, maxdate])
    .range([0, w]);

                var but1Circ = svg.append("g")
                    .selectAll("circle").data(but1)
                    .enter()
                    .append("svg:circle")
                    .attr("class", "button1")
                    .attr("cx", function(d,i){
                        // console.log(d.timeIs);
                        return x(parseDate(d.timeIs));//scale based on d.time
                    })
                    .attr("cy", 50)
                    .attr("r", 10)
                    .attr("fill","aquamarine")
                    .attr("opacity",.5)
                }
                // var button = svg.append("g")
                //     .selectAll("circle").data(data.feed.entry)
                //     .enter()
                //     .append("svg:circle")
                //     .attr("class", function(d,i){
                //          if(data.feed.entry[i]['gsx$button']['$t']=="button1"){
                //             totalButton1++;
                //             but1.push({"total":totalButton1, "time":data.feed.entry[i]['gsx$timestamp']['$t']})
                //             return "buttonCirc1";                       
                //         }
                //         if(data.feed.entry[i]['gsx$button']['$t']=="button2"){
                //             totalButton2++;
                //             return "buttonCirc2";                       
                //         }
                //         if(data.feed.entry[i]['gsx$button']['$t']=="button3"){
                //             totalButton3++;
                //             return "buttonCirc3";
                //         }
                //         if(data.feed.entry[i]['gsx$button']['$t']=="button4"){
                //             totalButton4++;
                //             return "buttonCirc4";
                //         }
                //         if(data.feed.entry[i]['gsx$button']['$t']=="button5"){
                //             totalButton5++;
                //             return "buttonCirc5";
                //         }
                //     })

                // button
                //     .attr("cx", function(d, i) {

                //     })

                })
                // })



            // https://docs.google.com/spreadsheets/d/1XX6jJc4uu4PsNp7JvQ4dZ8K9cIFnheQbqOe4QQsfZdE/pubhtml
            // https://docs.google.com/spreadsheets/d/1XX6jJc4uu4PsNp7JvQ4dZ8K9cIFnheQbqOe4QQsfZdE/pubhtml
            $.getJSON("https://spreadsheets.google.com/feeds/list/1XX6jJc4uu4PsNp7JvQ4dZ8K9cIFnheQbqOe4QQsfZdE/od6/public/values?alt=json", function(data) {
                console.log(data.feed.entry.length)
                for (j = 0; j < data.feed.entry.length; j++) {
                    console.log(data.feed.entry[j]['gsx$imageurl']['$t']);
                }

                entry = data.feed.entry;
                console.log(entry.length + "length")
                // var svg = d3.select("body")
                //     .append("svg")
                //     .attr("width", w)
                //     .attr("height", h)
                var suns = svg.append("g")
                    .attr("id", "sky")
                    .selectAll("img").data(data.feed.entry)
                    .enter()
                    .append("svg:image")
                    //Define clipping path
                suns.append("clipPath") //Make a new clipPath
                    .attr("id", "chart-area") //Assign an ID
                    .append("rect") //Within the clipPath, create a new rect
                    .attr("x", function(d, i) {
                        console.log(i)
                        return i * 100;
                    }) //Set rect's position and size…
                    .attr("y", 100)
                    .attr("width", 100)
                    .attr("height", 100);

                suns
                    .attr("clip-path", "url(#chart-area)")
                    .attr("xlink:href", function(d, i) {
                        // for(j=0; j<data.feed.entry.length; j++){
                        // console.log(j);
                        return data.feed.entry[i]['gsx$imageurl']['$t'];
                        // }
                    })
                    .attr("x", function(d, i) {
                        return i * 100;
                    })
                    .attr("y", 100)
                    .attr("width", 100)
                    .attr("height", 100);

            });
        })




        // var dir = "images/";
        // var fileextension = ".jpg";

        // var filename = [];

        // var data = [1, 5, 9, 1, 1,3]

        //   var w = 1200,
        //       h = 800,
        //       margin = 25;

        // // var drag = d3.behavior.drag()
        // //     .on("drag", function() {
        // //         var clippy = d3.select('#clip circle');
        // //         clippy.attr('cx', +clippy.attr('cx') + d3.event.dx);
        // //         clippy.attr('cy', +clippy.attr('cy') + d3.event.dy);
        // //     });

        //   var svg = d3.select("body")
        //     .append("svg")
        //       .attr("width", w)
        //       .attr("height", h)
        // var suns = svg.append("g")
        //             .attr("id","sky")
        //              .selectAll("img").data(data)
        //                 .enter()
        //                 .append("svg:image")
        // //Define clipping path
        // suns.append("clipPath")                  //Make a new clipPath
        //     .attr("id", "chart-area")           //Assign an ID
        //     .append("rect")                     //Within the clipPath, create a new rect
        //     .attr("x", function(d,i){
        //         console.log(i)
        //         return i*100;
        //     })                 //Set rect's position and size…
        //     .attr("y", 100)
        //     .attr("width", 100)
        //     .attr("height", 10);

        // suns
        //             .attr("clip-path", "url(#chart-area)") 
        //                 .attr("xlink:href", function(d,i){
        //                     return "images/sky"+i+".jpg";
        //                 })
        //                 .attr("x", function(d,i){
        //                     return i*100;
        //                 })
        //                 .attr("y", 100)
        //                 .attr("width", 100)
        //                 .attr("height", 100);




        // $.ajax({
        //     //This will retrieve the contents of the folder if the folder is configured as 'browsable'
        //     url: dir,
        //     success: function (data) {
        //         //Lsit all png file names in the page
        //         $(data).find("a:contains(" + fileextension + ")").each(function () {
        //             filename.push(this.href.replace(window.location.host, "").replace("http:///", ""));
        // // $("body").append($("<img src=" + dir + filename + "></img>"));
        //      })


        //                 var canvas = document.getElementById("myCanvas");
        //                 var ctx = canvas.getContext("2d");
        //              var image = new Image();
        //              for (i=0; i<filename.length; i++){
        //              image.src = dir + filename[i];//"sky.jpg";
        //              }
        //              $(image).load(function() {
        //                  // ctx.drawImage(image, 400, 400);
        //                  var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
        //                  var pixels = imageData.data;
        //                  var numPixels = imageData.width * imageData.height;
        //                  for (i=0; i<filename.length; i++){
        //                  //we take a square that is 10 by 10 from the top most corner and draw it at 200 by 200
        //                      ctx.drawImage(image, 0, 140, 10, 10,i*100, 0, 100, 100);
        //                  }
        //              });
        //          // }
        //             // });


        //         // });
        // }
        //     })
        // });








            // $.getJSON("https://spreadsheets.google.com/feeds/list/1Ds8TAVMTrV8jFZovhnOWe4OxuehaeXlOAhyrlugI4ss/od6/public/values?alt=json", function(data) {
            //     console.log(data.feed.entry.length);
            //     var dataLength = data.feed.entry.length;
            //   //first row "title" column
            //     for(i=0; i<dataLength; i++){
            //       console.log(data.feed.entry[i]['gsx$imageurl']['$t'])//data.feed.entry[i]['gsx$caption']['$t'])
            //         $('.results').prepend('<img src="'+ data.feed.entry[i]['gsx$imageurl']['$t']+'" alt="'+data.feed.entry[i]['gsx$caption']['$t']+'"/>');
            //     }

            //    entry = data.feed.entry;
            //     console.log(entry)
            // });
            // })




            // buttons//https://docs.google.com/spreadsheets/d/1iWrQh4Pc1G7DkyTCJGy2QLSI4sqnCRtjMbxOMh1b2tQ/pubhtml
            //insta// https://docs.google.com/spreadsheets/d/1N3WwbYtqSnsFMAKI73gwBy8gwb2llrCtD0CitOiky4/pubhtml
            // https://docs.google.com/spreadsheets/d/1N3WwbYtqSnsFMAKI73gwBy8gwb2l-lrCtD0CitOiky4/pubhtml


            //buttons json
            // https://spreadsheets.google.com/feeds/list/1iWrQh4Pc1G7DkyTCJGy2QLSI4sqnCRtjMbxOMh1b2tQ/od6/public/values?alt=json
            // https://docs.google.com/spreadsheets/d/1iWrQh4Pc1G7DkyTCJGy2QLSI4sqnCRtjMbxOMh1b2tQ/pubhtml
    </script>
</body>
<!-- <body> -->
<!-- <canvas id="myCanvas" width="1300" height="800"> -->
<!-- Insert fallback content here -->
<!-- </canvas> -->
<!-- </body> -->

</html>