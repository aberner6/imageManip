
<!DOCTYPE html>

<html>

<head>
    <title>IMAGES</title>
    <meta charset="utf-8">
    <script src="colorbrewer.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js" charset="utf-8"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
</head>
<style>
    .results img {
        width: 10%;
        float: left;
        display: block;
    }
    
    .axis path,
    .axis line {
        fill: none;
        stroke: black;
        shape-rendering: crispEdges;
    }
    
    .axis text {
        font-family: sans-serif;
        font-size: 11px;
    }
    
    #check {
        display: none;
        /*position:fixed;*/
        /*left: 100px;*/
        /*top:100px;*/
    }
</style>

<body>
<<<<<<< HEAD
=======
    <div id="check">
        <img src="check.png" width="20" height="20">
    </div>
>>>>>>> d9fc34a16a4129bdfc73aead4c45b8a4a13ec757
    <div class="results"></div>
    <script>
        var totalButton1 = 0;
        var but1 = [];
        var uniques = [];
        var storeBT = [];
        var storeThis = [];

        var dashArray = "1 5 1 1";


        var dur = 2000;

        var totalButton2 = 0;
        var totalButton3 = 0;
        var totalButton4 = 0;
        var totalButton5 = 0;
        var w = screen.width,
            h = screen.height-200,
            margin = 25;
        var padding = 200;
        var svg = d3.select("body")
            .append("svg")
            .attr("width", w)
            .attr("height", h);
        var parseDate = d3.time.format('%B %d, %Y %I:%M%p').parse;
        var mindate, maxdate, xScale;
        var xAxis = d3.svg.axis();
        var yAxis = d3.svg.axis();

        var centerline = h / 2;

        var mindateBT, maxdateBT, xScaleBT, yScaleBT;
        var parseDateBT = d3.time.format('%a %B %e %H:%M:%S').parse;
        // Fri May 22 11:34:30
<<<<<<< HEAD
=======
        doBT();
>>>>>>> d9fc34a16a4129bdfc73aead4c45b8a4a13ec757
        var thisTime = [];
var thisHour = [];
        $(document).ready(function() {
            // https://docs.google.com/spreadsheets/d/1XX6jJc4uu4PsNp7JvQ4dZ8K9cIFnheQbqOe4QQsfZdE/pubhtml
            // https://docs.google.com/spreadsheets/d/1XX6jJc4uu4PsNp7JvQ4dZ8K9cIFnheQbqOe4QQsfZdE/pubhtml
<<<<<<< HEAD
            $.getJSON("https://spreadsheets.google.com/feeds/list/1JHKJm232Adv1GwDNIz5VLyBfg12d6CNl3GrCfs6y-tU/od6/public/values?alt=json", function(data) {
=======
            $.getJSON("https://spreadsheets.google.com/feeds/list/1XX6jJc4uu4PsNp7JvQ4dZ8K9cIFnheQbqOe4QQsfZdE/od6/public/values?alt=json", function(data) {
>>>>>>> d9fc34a16a4129bdfc73aead4c45b8a4a13ec757
                console.log(data.feed.entry.length)

                // ['a', 'b', 'c'].forEach(function(d, i, arr) {
                //     console.log(d, i, arr)
                //     })
                //returns 

                for (j = 0; j < data.feed.entry.length; j++) {
                    thisTime.push(data.feed.entry[j]['gsx$date']['$t'].replace(" at", ''));
thisHour.push(parseDate(thisTime[j]).getHours())
                    // console.log(data.feed.entry[j]['gsx$imageurl']['$t']);
                    // console.log(data.feed.entry[j]);
                }


                entry = data.feed.entry;
                console.log(entry.length + "length")

                if (thisTime.length > 1) {
<<<<<<< HEAD
                    mindate = new Date("Tue Jun 30 2015 8:00:00 GMT-0400 (EDT)");//parseDate(thisTime[0]);
//parseDate(thisTime[0]);
=======
                    mindate = parseDate(thisTime[0]);
>>>>>>> d9fc34a16a4129bdfc73aead4c45b8a4a13ec757
                    maxD = Date.now(); //parseDate(thisTime[data.feed.entry.length - 1]);
                    maxdate = calcTime("copenhagen", 2);

                    function calcTime(city, offset) {

                        // create Date object for current location
                        d = new Date();

                        // convert to msec
                        // add local time zone offset
                        // get UTC time in msec
                        utc = d.getTime() + (d.getTimezoneOffset() * 60000);

                        // create new Date object for different city
                        // using supplied offset
                        nd = new Date(utc + (3600000 * offset));
                        console.log(nd);
                        return nd;
                        // return time as a string
                        // return "The local time in " + city + " is " + nd.toLocaleString();

                    }
                    xScale = d3.time.scale()
                        .domain([mindate, maxdate])
                        .range([100, w - 100]);

                    // xScaleBT = d3.time.scale()
                    //     .domain([mindateBT, maxdateBT])
                    //     .range([100, w - 100]);

                    xAxis
                        .scale(xScale)
                        .orient("bottom")
<<<<<<< HEAD
                        .ticks(10);
=======
                        .ticks(20);
>>>>>>> d9fc34a16a4129bdfc73aead4c45b8a4a13ec757
                    svg.append("g")
                        .attr("class", "axis") //Assign "axis" class
                        .attr("transform", "translate(0," + (centerline) + ")")
                        .call(xAxis);


                    console.log(thisTime);
                    var suns = svg.append("g")
                        .attr("id", "sky")
                        .selectAll("img").data(data.feed.entry)
                        .enter()
                        .append("svg:image")
                        //Define clipping path
                        // suns.append("clipPath") //Make a new clipPath
                        //     .attr("id", "chart-area") //Assign an ID
                        //     .append("rect") //Within the clipPath, create a new rect
                        //     .attr("x", function(d, i) {
                        //         console.log(i)
                        //         return i * 100;
                        //     }) //Set rect's position and size…
                        //     .attr("y", 100)
                        //     .attr("width", 10)
                        //     .attr("height", 10)
                    var extraPad = 1;
                    var clicked = false;


    // var minHour = d3.min((parseDate(thisTime[i]).getHours())
var maxHour = d3.max(thisHour, function(j) {
    return j;  //References first value in each subarray
});
var minHour = d3.min(thisHour, function(j) {
    return j;  //References first value in each subarray
});

var scaleIt = d3.scale.linear()
    .domain([minHour, maxHour])
    .range([centerline+100, h-100])

                    suns
                        .attr("clip-path", "url(#chart-area)")
                        .attr("xlink:href", function(d, i) {
                            return data.feed.entry[i]['gsx$imageurl']['$t'];
                        })
.attr("x", function(d, i) {
    return xScale(parseDate(thisTime[i])) * extraPad; //scale based on d.time
})
                        .attr("y", centerline)
                        .attr("width", 50)
                        .attr("height", 50)
                        .transition()
                        .duration(dur)
.attr("y", function(d,i){

    if(i>0){
        if(parseDate(thisTime[i]).getHours()==parseDate(thisTime[i-1]).getHours()||parseDate(thisTime[i]).getHours()==parseDate(thisTime[i-1]).getHours()+1){
                // var thisIndex++;
                // console.log(scaleIt(parseDate(thisTime[i]).getHours()))
                return scaleIt(parseDate(thisTime[i]).getHours());
            }
            else{
                return centerline+100;
            }
        }else{
            return centerline+100;
        }
});
                    suns
                        .on("click", function(d) {
                            if (clicked == false) {
                                d3.select(this)
                                    .transition()
                                    .duration(dur / 2)
<<<<<<< HEAD
                                    .attr("y", centerline+20)
=======
                                    .attr("y", h / 2)
>>>>>>> d9fc34a16a4129bdfc73aead4c45b8a4a13ec757
                                    .attr("width", 200)
                                    .attr("height", 200)
                                clicked = true;
                            }
                            if (clicked) {
                                d3.select(this)
                                    .transition()
                                    .delay(dur)
                                    .duration(dur / 4)
                                    .attr("y", function(d,i){
                                        console.log(d)
                                        return h / 2 + 200
                                    })
                                    .attr("width", 50)
                                    .attr("height", 50)
                                clicked = false;
                            }
                        })

                    var imgLine = svg.append("g")
                        .selectAll("line").data(data.feed.entry)
                        .enter()
                        .append("svg:line")
                        .attr("class", "imgLine")
                        .attr("x1", function(d, i) {
                            return xScale(parseDate(thisTime[i])) * extraPad; //scale based on d.time
                        })
                        .attr("x2", function(d, i) {
                            return xScale(parseDate(thisTime[i])) * extraPad; //scale based on d.time
                        })
                        .attr("y1", centerline)
                        .attr("y2", centerline)
                        .attr("stroke", "grey")
                        .attr("stroke-weight", 1)
                        .attr("stroke-dasharray", dashArray)
                        .transition()
                        .duration(dur)
.attr("y2", function(d,i){

    if(i>0){
        if(parseDate(thisTime[i]).getHours()==parseDate(thisTime[i-1]).getHours()||parseDate(thisTime[i]).getHours()==parseDate(thisTime[i-1]).getHours()+1){
                // var thisIndex++;
                // console.log(scaleIt(parseDate(thisTime[i]).getHours()))
                return scaleIt(parseDate(thisTime[i]).getHours());
            }
            else{
                return centerline+100;
            }
        }else{
            return centerline+100;
        }
});
                }
                doButton();
            });
        })




        function doButton() {

            $.getJSON("https://spreadsheets.google.com/feeds/list/1iWrQh4Pc1G7DkyTCJGy2QLSI4sqnCRtjMbxOMh1b2tQ/od6/public/values?alt=json", function(data) {
                // var parseDate = d3.time.format('%B %d, %Y %I:%M%p').parse;
                console.log(data.feed.entry[data.feed.entry.length - 1])
                for (i = 0; i < data.feed.entry.length; i++) {
                    if (data.feed.entry[i]['gsx$device']['$t'] == "wombat_wombat") {
                        but1.push({
                            "buttonIs": data.feed.entry[i]['gsx$button']['$t'],
                            "timeIs": data.feed.entry[i]['gsx$timestamp']['$t'].replace(" at", '')
                        })

                    }
                }


                if (but1.length > 1) {
                    // console.log(unique(but1));
                    unique(but1);

                    function unique(obj) {
                        var stringify = {};
                        for (var i = 0; i < obj.length; i++) {
                            var keys = Object.keys(obj[i]);
                            keys.sort(function(a, b) {
                                return a - b
                            });
                            var str = '';
                            for (var j = 0; j < keys.length; j++) {
                                str += JSON.stringify(keys[j]);
                                str += JSON.stringify(obj[i][keys[j]]);
                            }
                            if (!stringify.hasOwnProperty(str)) {
                                uniques.push(obj[i]);
                                stringify[str] = true;
                            }
                        }
                        return uniques;
                    }
                }

                if (uniques.length > 1) {

                    // mindate = parseDate(uniques[0].timeIs);
                    // maxdate = parseDate(uniques[totalButton1 - 1].timeIs);
                    // x = d3.time.scale()
                    //     .domain([mindate, maxdate])
                    //     .range([10, w - 10]);

                    // var but1Circ = svg.append("g")
                    //     .selectAll("circle").data(uniques)
                    //     .enter()
                    //     .append("svg:circle")
                    //     .attr("class", "button1")
                    //     .attr("cy",centerline)
                    //     .attr("cx", function(d, i) {
                    //         return xScale(parseDate(d.timeIs)); //scale based on d.time
                    //     })
                    //     .attr("r", 10)
                    //     .attr("fill", function(d,i){
                    //         // if(d.buttonIs=="button1"){
                    //         //     return "blue";
                    //         // }
                    //         // if(d.buttonIs=="button4"){
                    //         //     return "red";
                    //         // }
                    //         // if(d.buttonIs=="button3"){
                    //         //     return "grey";
                    //         // }
                    //         "none"
                    //     })
                    //     // .attr("opacity", .5)
                    //     .transition()
                    //     .duration(dur)                       
                    //     .attr("cy", padding/3)


                    var radius = 10;
                    var strokeWeight = 2;

                    // var winCircle = svg.selectAll("win")
                    //     .data(uniques)
                    //     .enter().append("circle")
                    //     .attr("class", function(d, i) {
                    //         return d.buttonIs;
                    //     })
                    //     .attr("cx", function(d, i) {
                    //         // if(d.buttonIs=="button1"){
                    //         // return "blue";
                    //         // }
                    //         // console.log(xScale(parseDate(d.timeIs)))
                    //         return xScale(parseDate(d.timeIs)); //scale based on d.time
                    //         // }
                    //     })
                    //     .attr("r", radius)
                    //     .attr("fill", "none")
                    //     // .attr("stroke-dasharray", "4,4")
                    //     .attr("stroke", function(d, i) {
                    //         if (d.buttonIs == "button1") {
                    //             return "blue";
                    //         }
                    //         if (d.buttonIs == "button2") {
                    //             return "grey";
                    //         }
                    //         if (d.buttonIs == "button3") {
                    //             return "red";
                    //         }
                    //     })
                    //     .attr("stroke-width", strokeWeight)
                    //     .attr("opacity", .5)
                    //     .attr("cy", centerline)
                    //     .transition()
                    //     .duration(dur)
                    //     .attr("cy", padding / 3)


<<<<<<< HEAD
                       



=======
>>>>>>> d9fc34a16a4129bdfc73aead4c45b8a4a13ec757
                    var checks = svg.selectAll("img").data(uniques)
                        .enter()
                        .append("svg:image")
                    checks
                        .attr("xlink:href", function(d,i){
<<<<<<< HEAD
                            if(d.buttonIs == "button1"){ //cloud
                                return "idea.png";
=======
                            if(d.buttonIs == "button1"){
                                return "star.png";
>>>>>>> d9fc34a16a4129bdfc73aead4c45b8a4a13ec757
                            }
                            if(d.buttonIs == "button3"){
                                return "thunder.png";
                            }
                            if(d.buttonIs == "button2"){
<<<<<<< HEAD
                                return "star.png";
=======
                                return "idea.png";
>>>>>>> d9fc34a16a4129bdfc73aead4c45b8a4a13ec757
                            }
                        })
                        // .attr("id", "checks")
                        .attr("x", function(d, i) {
                            // if (d.buttonIs == "button1") {
                                // console.log(parseDate(d.timeIs)+"andtime"+i)
                                return xScale(parseDate(d.timeIs)); //scale based on d.time
                            // } else {
                                // return -w * 2;
                            // }
                        })
                        .attr("opacity", 0)
                        .attr("y", centerline)
                        .attr("width", 20)
                        .attr("height", 20)
                        .attr("opacity",1)
                        .transition()
                        .duration(dur)
                        .attr("y", function(d,i){
                            if(d.buttonIs == "button1"){
                                return margin*2;
                            }
                            if(d.buttonIs == "button3"){
                                return margin*3;
                            }
                            if(d.buttonIs == "button2"){
                                return margin*4;
                            }
<<<<<<< HEAD
                        }) 
=======
                        })                        
                    // d3.selectAll(".button1")
                    //     .transition()
                    //     .delay(dur * 1.2)
                    //     .duration(1000)
                    //     .attr("r", radius / 2)
                    //     .attr("stroke-dasharray", "4,4")
                    //     .attr("stroke-width", radius * 2)
                    //     .each("end", function() {
                    //         d3.selectAll(".win")
                    //             .transition()
                    //             .duration(2000)
                    //             .attr("r", radius)
                    //             .attr("stroke-width", strokeWeight)
                    //             .each("end", function() {
                    //                 checks.attr("opacity", 1)
                    //             })
                    //     })



>>>>>>> d9fc34a16a4129bdfc73aead4c45b8a4a13ec757
                    var but1Line = svg.append("g")
                        .selectAll("line").data(uniques)
                        .enter()
                        .append("svg:line")
                        .attr("class", function(d){
                            return d.buttonIs;
                        })
                        .attr("x1", function(d, i) {
<<<<<<< HEAD
                            return xScale(parseDate(d.timeIs))+10; //scale based on d.time
                        })
                        .attr("x2", function(d, i) {
                            return xScale(parseDate(d.timeIs))+10; //scale based on d.time
=======
                            return xScale(parseDate(d.timeIs)); //scale based on d.time
                        })
                        .attr("x2", function(d, i) {
                            return xScale(parseDate(d.timeIs)); //scale based on d.time
>>>>>>> d9fc34a16a4129bdfc73aead4c45b8a4a13ec757
                        })
                        .attr("y1", centerline)
                        .attr("y2", centerline)
                        .attr("stroke", "grey")
<<<<<<< HEAD
                        .attr("stroke-weight", .5)
                        .attr("opacity", .2)
                        // .attr("stroke-dasharray", dashArray)
=======
                        .attr("stroke-weight", 1)
                        .attr("stroke-dasharray", dashArray)
>>>>>>> d9fc34a16a4129bdfc73aead4c45b8a4a13ec757
                        // .attr("stroke-dasharray", "1 2 2 2")
                        .transition()
                        .duration(dur)
                        .attr("y2", function(d,i){
                            if(d.buttonIs == "button1"){
<<<<<<< HEAD
                                return margin*2+10;
                            }
                            if(d.buttonIs == "button3"){
                                return margin*3+10;
                            }
                            if(d.buttonIs == "button2"){
                                return margin*4+10;
=======
                                return margin*2;
                            }
                            if(d.buttonIs == "button3"){
                                return margin*3;
                            }
                            if(d.buttonIs == "button2"){
                                return margin*4;
>>>>>>> d9fc34a16a4129bdfc73aead4c45b8a4a13ec757
                            }
                            else{
                                return centerline;
                            }
<<<<<<< HEAD
                        });
                                doBT();
                }
            })
        }
        var oColor;
        var maxTime;
=======
                        })

                }
            })
        }
>>>>>>> d9fc34a16a4129bdfc73aead4c45b8a4a13ec757
        var maxActivity = 100;
        var minActivity = 0;
        var distData = [];
        var names = [];
        var uniqueNames = [];
        var zeroBT = [];
        var oneBT = [];
        var twoBT = [];
        var threeBT = [];
        var fourBT = [];
        var fiveBT = [];
        var sixBT = [];
        var sevenBT = [];

        var specialBT = [];

<<<<<<< HEAD
var totalK = [];

var specialStore = [];
var trackTotal = [];
        function doBT() {
// https://docs.google.com/document/d/1LNbO-5UUnWgNv4T6asMBW4lczOJfgwtCJQpc-vfGiP0/pub     
// https://docs.google.com/feeds/list/1LNbO-5UUnWgNv4T6asMBW4lczOJfgwtCJQpc-vfGiP0/od6/public/values?alt=json       


// "https://dl.dropboxusercontent.com/u/97059/fitbit/fitbit.json"
            $.getJSON("https://spreadsheets.google.com/feeds/list/1CK2L-NwoswZ9l4-MU4tbu-bwt3eI1Oot_bbXkuFNl8c/od6/public/values?alt=json", function(data) {

=======



        function doBT() {
            $.getJSON("https://spreadsheets.google.com/feeds/list/1CK2L-NwoswZ9l4-MU4tbu-bwt3eI1Oot_bbXkuFNl8c/od6/public/values?alt=json", function(data) {
                // $.getJSON("https://spreadsheets.google.com/feeds/list/1fx3ebJuZCrpjfqxg8GwPauwpjqs43Y6fEmmtTPEUfzE/od6/public/values?alt=json", function(data) {

                // d3.tsv("22may.txt", function(data){
                // for(i=0; i<data.length; i++){
                //     console.log(data[i]);
                // }

                // for (j = 0; j < data.feed.entry.length; j++) {
                //     thisTime.push(data.feed.entry[j]['gsx$date']['$t'].replace(" at", ''));
                //     // console.log(data.feed.entry[j]['gsx$imageurl']['$t']);
                //     // console.log(data.feed.entry[j]);
                // }

                // storeThis.push(data.feed.entry)
                // console.log(d);
>>>>>>> d9fc34a16a4129bdfc73aead4c45b8a4a13ec757
                for (j = 0; j < data.feed.entry.length; j++) {
                    if (parseInt(data.feed.entry[j]['gsx$dist']['$t']) < 0) {

                        storeBT.push({
                            "device": data.feed.entry[j]['gsx$device']['$t'],
                            "timeIs": data.feed.entry[j]['gsx$timestamp']['$t'], //.replace(" at", '')
                            "dist": data.feed.entry[j]['gsx$dist']['$t']
                        })
                    } else {}
                    names.push(data.feed.entry[j]['gsx$device']['$t']);
                    if (parseInt(data.feed.entry[j]['gsx$dist']['$t']) < 0) {
                        distData.push((parseInt(data.feed.entry[j]['gsx$dist']['$t'])) * -1);
                    }
                    $.each(names, function(i, el) {
                        if ($.inArray(el, uniqueNames) === -1) {
                            uniqueNames.push(el);
                        }
                    });
                }
                if (storeBT.length > 0) {
<<<<<<< HEAD
                    oColor = d3.scale.ordinal()
                        .domain([uniqueNames])
                        .range(colorbrewer.BuGn[9]);

=======
>>>>>>> d9fc34a16a4129bdfc73aead4c45b8a4a13ec757
                    mindateBT = parseDateBT(storeBT[0].timeIs);
                    maxdateBT = parseDateBT(storeBT[storeBT.length - 1].timeIs) //Date.now(); //parseDate(thisTime[data.feed.entry.length - 1]);

                    minActivity = d3.min(d3.values(distData));
                    maxActivity = d3.max(d3.values(distData));

                    yScaleBT = d3.scale.linear()
                        .domain([minActivity, maxActivity])
                        .range([centerline, centerline / 2])
                    yAxis
                        .scale(yScaleBT)
                        .orient("left")
                        .ticks(4);
                    // svg.append("g")
                    //     .attr("class", "axis") //Assign "axis" class
                    //     .attr("transform", "translate(100," + (0) + ")")
                    //     .call(yAxis);

                    xScaleBT = d3.time.scale()
                        .domain([mindateBT, maxdateBT])
                        .range([100, w - 100]);
<<<<<<< HEAD
                }
                if (mindateBT) {

                    var hHere = 10;
                    var quant = 0;
                    var multiplier = 10;

=======
                    // Fri May 22 11:34:30
                    // for(i=0; i<storeBT.length; i++){
                    //     for(j=0; j<uniqueNames.length; j++){
                    //         if(storeBT[i].device==uniqueNames[j]){
                    //             allBT[j]=(storeBT[i]);
                    //         }
                    //     }        
                    // }
                    // var minActivity = -65;
                }
                if (mindateBT) {
                    var color = d3.scale.category10();
                    // var rect = svg.append("g").attr("class","BTRect")
                    //                 // .selectAll("rect")
                    //                 .append("svg:rect")
                    //                 .attr("class", "btRect")
                    //                 .attr("x",xScaleBT(mindateBT))
                    //                 .attr("y",yScaleBT(65))
                    //                 .attr("width",0)
                    //                 .attr("height", yScaleBT(60)-yScaleBT(70))
                    //                 .attr("fill","grey")
                    //                 .attr("opacity",.1)
                    //                 .transition()
                    //                 .delay(dur)
                    //                 .duration(dur)
                    //                 .attr("width", xScaleBT(maxdateBT)-xScaleBT(mindateBT))                



                    // var btDist = svg.append("g").attr("class","BT")
                    //     .selectAll("circle").data(storeBT)
                    //     .enter()
                    //     .append("svg:circle")
                    //     .attr("class", "btDist")
                    //     .attr("cx", function(d, i) {
                    //         // return 100
                    //         return xScaleBT(parseDateBT(d.timeIs)); //scale based on d.time
                    //     })
                    //     .attr("cy", function(d,i){
                    //         // return 100
                    //         if(isNaN(d.dist)){
                    //             return h*2;
                    //         }else{
                    //             return yScaleBT(parseInt(d.dist)*-1);
                    //         }
                    //     })
                    //     .attr("r", 2)
                    //     .attr("fill", function(d,i){
                    //         for(j=0; j<uniqueNames.length; j++){
                    //             if(d.device==uniqueNames[j]){
                    //                 // allBT[j] = d;
                    //                 return color(j);
                    //                 // return "rgb(0, 0, " + (j * 100) + ")";
                    //             }
                    //         }
                    //     })
                    //     .attr("opacity", .5);



                    //This is the accessor function we talked about above
                    var lineFunction = d3.svg.line()
                        .x(function(d) {
                            return xScaleBT(parseDateBT(d.timeIs));
                        })
                        .y(function(d) {
                            if (isNaN(d.dist)) {
                                return h * 2;
                            } else {
                                return yScaleBT(parseInt(d.dist) * -1);
                            }
                            // return d.y; 
                        })
                        .interpolate("basis");

                    // if(parseInt(d.dist)*-1<10&&parseInt(d.dist)*-1>=0){
                    var lineFunction2 = d3.svg.line()
                        .x(function(d) {
                            return xScaleBT(parseDateBT(d.timeIs));
                        })
                        .y(function(d) {
                            if (parseInt(d.dist) * -1 < 60 && parseInt(d.dist) * -1 > 50) {
                                return centerline / 2 //yScaleBT(parseInt(d.dist)*-1);
                            } else {
                                // return h*2;
                            }
                            // return d.y; 
                        })
                        .interpolate("linear");


                    for (i = 0; i < storeBT.length; i++) {
                        // if(storeBT[i].dist< -65){
                        //     specialBT.push(storeBT[i])
                        // }
                        // for(j=0; j<uniqueNames.length; j++){
                        if (storeBT[i].device == uniqueNames[0]) {
                            zeroBT.push(storeBT[i]);
                        }
                        if (storeBT[i].device == uniqueNames[1]) {
                            oneBT.push(storeBT[i]);
                        }
                        if (storeBT[i].device == uniqueNames[2]) {
                            twoBT.push(storeBT[i]);
                        }
                        if (storeBT[i].device == uniqueNames[3]) {
                            threeBT.push(storeBT[i]);
                        }
                        if (storeBT[i].device == uniqueNames[4]) {
                            fourBT.push(storeBT[i]);
                        }
                        if (storeBT[i].device == uniqueNames[5]) {
                            fiveBT.push(storeBT[i]);
                        }
                        if (storeBT[i].device == uniqueNames[6]) {
                            sixBT.push(storeBT[i]);
                        }
                        if (storeBT[i].device == uniqueNames[7]) {
                            sevenBT.push(storeBT[i]);
                        }
                        // if(storeBT[i].device==uniqueNames[7]){
                        //     oneBT.push(storeBT[i]);
                        // }
                        // }
                    }

                    // for(i=0; i<oneBT.length; i++){
                    //     if(parseInt(oneBT[i].dist)>-70){
                    //         var thisIndex = i;
                    //         var firstyes = oneBT[thisIndex].timeIs;
                    //         specialBT.push({
                    //                 "device": oneBT[i].device,
                    //                 "timeIt": firstyes,//.replace(" at", '')
                    //                 "dist": oneBT[i].dist,
                    //                 "onoff":1
                    //             })
                    //     }else{
                    //         var thisIndex = i;
                    //         var firstno = oneBT[thisIndex].timeIs;
                    //         specialBT.push({
                    //                 "device": oneBT[i].device,
                    //                 "timeIt": firstno,//.replace(" at", '')
                    //                 "dist": oneBT[i].dist,
                    //                 "onoff":0
                    //             })       
                    //     }
                    // }
                    // .x(function(d) { 
                    //     return xScaleBT(parseDateBT(d.timeIs)); 
                    // })
                    // .y(function(d) { 
                    //     return yScaleBT(parseInt(d.dist)*-1);
                    // })




                    //for one bluetooth device
                    //if the distance is between a certain thing
                    //draw a mark?
                    // "keep drawing"

                    // var blRect = svg.append("g").attr("class","bt1")
                    //     .selectAll("rect").data(oneBT)
                    //     .enter()
                    //     .append("svg:rect")
                    //     .attr("class", "bt1")
                    //     .attr("x", function(d, i) {
                    //             return xScaleBT(parseDateBT(d.timeIs)); //scale based on d.time
                    //     })
                    //     .attr("y", centerline/2)
                    //     .attr("width",3)
                    //     .attr("height",5)
                    //     .attr("fill", function(d){
                    //         if(parseInt(d.dist)>-10){
                    //             return "blue";
                    //         }else{
                    //             return "none";
                    //         }
                    //     })
                    //     .attr("opacity", function(d){
                    //         if(parseInt(d.dist)>-70){
                    //             return .5;
                    //         }else{
                    //             return 0;
                    //         }
                    //     })
                    var hHere = 10;
                    var multiplier = 10;
                    var oColor = d3.scale.ordinal()
                        .domain([uniqueNames])
                        .range(colorbrewer.BuGn[9]);
>>>>>>> d9fc34a16a4129bdfc73aead4c45b8a4a13ec757

                    var blRect = svg.append("g").attr("class", "bt1")
                        .selectAll("rect").data(storeBT)
                        .enter()
                        .append("svg:rect")
<<<<<<< HEAD
                        .attr("class", function(d,i){
    // if (parseInt(d.dist) > -50) {
    //     for (j = 0; j < uniqueNames.length; j++) {
    //         specialStore.push({"device":uniqueNames[j],"dist":d.dist,"timestamp":d.timeIs})
    //     }
    // }
                            return d.dist+"bt1"
                        })
                        .attr("x", function(d, i) {
                            return xScaleBT(parseDateBT(d.timeIs)); //scale based on d.time
                        })
.attr("y", function(d, i) {
    if (parseInt(d.dist) > -50) {
        for (j = 0; j < uniqueNames.length; j++) {
            if (d.device == uniqueNames[j]) {
                return centerline - j * multiplier * 1.5;
            }
        }
        }
        else {
            for (j = 0; j < uniqueNames.length; j++) {
                if (d.device == uniqueNames[j]) {
                    return centerline / 1.5 - j * multiplier * 1.5;
                }
            }
        }
=======
                        .attr("class", "bt1")
                        .attr("x", function(d, i) {
                            return xScaleBT(parseDateBT(d.timeIs)); //scale based on d.time
                        })
                        .attr("y", function(d, i) {
                            if (parseInt(d.dist) > -50) {
                                for (j = 0; j < uniqueNames.length; j++) {
                                    if (d.device == uniqueNames[j]) {
                                        return centerline - j * multiplier * 1.5;
                                    }
                                }
                            } else {
                                for (j = 0; j < uniqueNames.length; j++) {
                                    if (d.device == uniqueNames[j]) {
                                        return centerline / 1.5 - j * multiplier * 1.5;
                                    }
                                }
                            }
>>>>>>> d9fc34a16a4129bdfc73aead4c45b8a4a13ec757
                        })
                        .attr("width", 5)
                        .attr("height", hHere)
                        .attr("fill", function(d) {
                            for (j = 0; j < uniqueNames.length; j++) {
                                if (d.device == uniqueNames[j]) {
<<<<<<< HEAD
=======
                                    // console.log(j)
>>>>>>> d9fc34a16a4129bdfc73aead4c45b8a4a13ec757
                                    return oColor(uniqueNames[j]);
                                }
                            }
                        })
                        .attr("opacity", function(d) {
<<<<<<< HEAD
                            return 1;
                        })

var uniqueKDone = false;
    function keyConsolidation(givenKey,i) { 
        var total = 0;
        for (i = 0;i<specialStore.length; i++){ 
            if(specialStore[i].device == givenKey){
                total++;
            }else{
            }
        }
         return total;
     } 
for (i = 0; i<uniqueNames.length; i++){
   totalK[i]= keyConsolidation(uniqueNames[i])
    uniqueKDone=true;   
}
if(uniqueKDone){
    console.log(totalK)
    makeText(totalK);
}
// makeText(); 


=======
                            // if(parseInt(d.dist)>-70){
                            return 1;
                            // }
                            // else{
                            // return 0;
                            // }
                        })




                    var strokePath = .5;
                    // //The line SVG Path we draw
                    // var lineGraph = svg.append("path")
                    //                     .attr("d", lineFunction(zeroBT))
                    //                     .attr("stroke", color(0))
                    //                     .attr("stroke-width", strokePath)
                    //                     .attr("fill", "none");
                    //The line SVG Path we draw
                    // var lineGraph = svg.append("path")
                    //                     .attr("d", lineFunction(oneBT))
                    //                     .attr("stroke", color(1))
                    //                     .attr("stroke-width", strokePath*8)
                    //                     .attr("fill", "none");
                    // //The line SVG Path we draw
                    // var lineGraph = svg.append("path")
                    //                     .attr("d", lineFunction(twoBT))
                    //                     .attr("stroke", color(2))
                    //                     .attr("stroke-width", strokePath)
                    //                     .attr("fill", "none");
                    // //The line SVG Path we draw
                    // var lineGraph = svg.append("path")
                    //                     .attr("d", lineFunction(threeBT))
                    //                     .attr("stroke", color(3))
                    //                     .attr("stroke-width", strokePath)
                    //                     .attr("fill", "none");
                    // //The line SVG Path we draw
                    // var lineGraph = svg.append("path")
                    //                     .attr("d", lineFunction(fourBT))
                    //                     .attr("stroke", color(4))
                    //                     .attr("stroke-width", strokePath)
                    //                     .attr("fill", "none");
                    // //The line SVG Path we draw
                    // var lineGraph = svg.append("path")
                    //                     .attr("d", lineFunction(fiveBT))
                    //                     .attr("stroke", color(5))
                    //                     .attr("stroke-width", strokePath)
                    //                     .attr("fill", "none");
                    // //The line SVG Path we draw
                    // var lineGraph = svg.append("path")
                    //                     .attr("d", lineFunction(sixBT))
                    //                     .attr("stroke", color(6))
                    //                     .attr("stroke-width", strokePath)
                    //                     .attr("fill", "none");                    
>>>>>>> d9fc34a16a4129bdfc73aead4c45b8a4a13ec757
                    //  //The line SVG Path we draw
                    // var lineGraph = svg.append("path")
                    //                     .attr("d", lineFunction(sevenBT))
                    //                     .attr("stroke", color(7))
                    //                     .attr("stroke-width", strokePath)
                    //                     .attr("fill", "none"); 
                }
            })
        }
<<<<<<< HEAD



function makeText(totalK){

d3.selectAll(".summary").remove();    
var sumText = svg.selectAll("summary")
    .data((totalK))
    .enter()
    .append("text").attr("class", "summary")
    .attr("font-size",14)
    .attr("fill",function(d,i){
        return oColor(i);
    })
    .attr("x", function(d,i){
        return w/3 + i*10;
    })
    .attr("y", h)
    .html(function(d,i){
        return (d)+" Time in Workshop"; 
    })
}
=======
        //activity logs
        // https://docs.google.com/spreadsheets/d/1fx3ebJuZCrpjfqxg8GwPauwpjqs43Y6fEmmtTPEUfzE/pubhtml




        // })




        // var button = svg.append("g")
        //     .selectAll("circle").data(data.feed.entry)
        //     .enter()
        //     .append("svg:circle")
        //     .attr("class", function(d,i){
>>>>>>> d9fc34a16a4129bdfc73aead4c45b8a4a13ec757
        //          if(data.feed.entry[i]['gsx$button']['$t']=="button1"){
        //             totalButton1++;
        //             but1.push({"total":totalButton1, "time":data.feed.entry[i]['gsx$timestamp']['$t']})
        //             return "buttonCirc1";                       
        //         }
        //         if(data.feed.entry[i]['gsx$button']['$t']=="button2"){
        //             totalButton2++;
        //             return "buttonCirc2";                       
        //         }
        //         if(data.feed.entry[i]['gsx$button']['$t']=="button3"){
        //             totalButton3++;
        //             return "buttonCirc3";
        //         }
        //         if(data.feed.entry[i]['gsx$button']['$t']=="button4"){
        //             totalButton4++;
        //             return "buttonCirc4";
        //         }
        //         if(data.feed.entry[i]['gsx$button']['$t']=="button5"){
        //             totalButton5++;
        //             return "buttonCirc5";
        //         }
        //     })

<<<<<<< HEAD
=======
        // button
        //     .attr("cx", function(d, i) {

        //     })
>>>>>>> d9fc34a16a4129bdfc73aead4c45b8a4a13ec757




<<<<<<< HEAD
=======
        // var dir = "images/";
        // var fileextension = ".jpg";

        // var filename = [];

        // var data = [1, 5, 9, 1, 1,3]

        //   var w = 1200,
        //       h = 800,
        //       margin = 25;

        // // var drag = d3.behavior.drag()
        // //     .on("drag", function() {
        // //         var clippy = d3.select('#clip circle');
        // //         clippy.attr('cx', +clippy.attr('cx') + d3.event.dx);
        // //         clippy.attr('cy', +clippy.attr('cy') + d3.event.dy);
        // //     });

        //   var svg = d3.select("body")
        //     .append("svg")
        //       .attr("width", w)
        //       .attr("height", h)
        // var suns = svg.append("g")
        //             .attr("id","sky")
        //              .selectAll("img").data(data)
        //                 .enter()
        //                 .append("svg:image")
        // //Define clipping path
        // suns.append("clipPath")                  //Make a new clipPath
        //     .attr("id", "chart-area")           //Assign an ID
        //     .append("rect")                     //Within the clipPath, create a new rect
        //     .attr("x", function(d,i){
        //         console.log(i)
        //         return i*100;
        //     })                 //Set rect's position and size…
        //     .attr("y", 100)
        //     .attr("width", 100)
        //     .attr("height", 10);

        // suns
        //             .attr("clip-path", "url(#chart-area)") 
        //                 .attr("xlink:href", function(d,i){
        //                     return "images/sky"+i+".jpg";
        //                 })
        //                 .attr("x", function(d,i){
        //                     return i*100;
        //                 })
        //                 .attr("y", 100)
        //                 .attr("width", 100)
        //                 .attr("height", 100);




        // $.ajax({
        //     //This will retrieve the contents of the folder if the folder is configured as 'browsable'
        //     url: dir,
        //     success: function (data) {
        //         //Lsit all png file names in the page
        //         $(data).find("a:contains(" + fileextension + ")").each(function () {
        //             filename.push(this.href.replace(window.location.host, "").replace("http:///", ""));
        // // $("body").append($("<img src=" + dir + filename + "></img>"));
        //      })


        //                 var canvas = document.getElementById("myCanvas");
        //                 var ctx = canvas.getContext("2d");
        //              var image = new Image();
        //              for (i=0; i<filename.length; i++){
        //              image.src = dir + filename[i];//"sky.jpg";
        //              }
        //              $(image).load(function() {
        //                  // ctx.drawImage(image, 400, 400);
        //                  var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
        //                  var pixels = imageData.data;
        //                  var numPixels = imageData.width * imageData.height;
        //                  for (i=0; i<filename.length; i++){
        //                  //we take a square that is 10 by 10 from the top most corner and draw it at 200 by 200
        //                      ctx.drawImage(image, 0, 140, 10, 10,i*100, 0, 100, 100);
        //                  }
        //              });
        //          // }
        //             // });


        //         // });
        // }
        //     })
        // });
>>>>>>> d9fc34a16a4129bdfc73aead4c45b8a4a13ec757




        // $.getJSON("https://spreadsheets.google.com/feeds/list/1Ds8TAVMTrV8jFZovhnOWe4OxuehaeXlOAhyrlugI4ss/od6/public/values?alt=json", function(data) {
        //     console.log(data.feed.entry.length);
        //     var dataLength = data.feed.entry.length;
        //   //first row "title" column
        //     for(i=0; i<dataLength; i++){
        //       console.log(data.feed.entry[i]['gsx$imageurl']['$t'])//data.feed.entry[i]['gsx$caption']['$t'])
        //         $('.results').prepend('<img src="'+ data.feed.entry[i]['gsx$imageurl']['$t']+'" alt="'+data.feed.entry[i]['gsx$caption']['$t']+'"/>');
        //     }

        //    entry = data.feed.entry;
        //     console.log(entry)
        // });
        // })




<<<<<<< HEAD
=======
        // buttons//https://docs.google.com/spreadsheets/d/1iWrQh4Pc1G7DkyTCJGy2QLSI4sqnCRtjMbxOMh1b2tQ/pubhtml
        //insta// https://docs.google.com/spreadsheets/d/1N3WwbYtqSnsFMAKI73gwBy8gwb2llrCtD0CitOiky4/pubhtml
        // https://docs.google.com/spreadsheets/d/1N3WwbYtqSnsFMAKI73gwBy8gwb2l-lrCtD0CitOiky4/pubhtml


        //buttons json
        // https://spreadsheets.google.com/feeds/list/1iWrQh4Pc1G7DkyTCJGy2QLSI4sqnCRtjMbxOMh1b2tQ/od6/public/values?alt=json
        // https://docs.google.com/spreadsheets/d/1iWrQh4Pc1G7DkyTCJGy2QLSI4sqnCRtjMbxOMh1b2tQ/pubhtml
>>>>>>> d9fc34a16a4129bdfc73aead4c45b8a4a13ec757
    </script>
</body>
<!-- <body> -->
<!-- <canvas id="myCanvas" width="1300" height="800"> -->
<!-- Insert fallback content here -->
<!-- </canvas> -->
<!-- </body> -->

</html>